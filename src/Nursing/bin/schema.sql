CREATE SCHEMA Nursing;
GO

CREATE TABLE Nursing.ObservationChartFieldTitleType (
	TypeID INT PRIMARY KEY IDENTITY NOT NULL,
	TypeName VARCHAR(50) UNIQUE,
	TypeDescription VARCHAR(50)
)
GO

CREATE TABLE Nursing.ObservationChartFieldTitle (
	FieldTitleID INT PRIMARY KEY IDENTITY NOT NULL,
	FieldTitleName VARCHAR(50) UNIQUE,
	FieldTitleType VARCHAR(50),
	FieldTitleDescription VARCHAR(50),
	FOREIGN KEY (FieldTitleType) REFERENCES Patients.FieldTitleType(TypeName) ON UPDATE CASCADE ON DELETE CASCADE
)
GO
CREATE TABLE Nursing.ObservationChart(
	ObservationChartID INT PRIMARY KEY IDENTITY NOT NULL,
	PatientID VARCHAR(20),
	StaffID VARCHAR(20),
	ObservationDate DATE NOT NULL DEFAULT GETDATE(),
	FOREIGN KEY (PatientID) REFERENCES Patients.Patient(PatientUUID) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (StaffID) REFERENCES Staffs.Staff(StaffUUID) ON UPDATE CASCADE ON DELETE NO ACTION
)
GO

CREATE TABLE Nursing.ObservationChartFieldValue (
	FieldValueID INT PRIMARY KEY IDENTITY NOT NULL,
	ObservationChartID INT,
	FieldTitle VARCHAR(50),
	FieldValue VARCHAR(max),
	FOREIGN KEY (FieldTitle) REFERENCES Nursing.ObservationChartFieldTitle(FieldTitleName) ON UPDATE CASCADE ON DELETE NO ACTION,
	FOREIGN KEY (ObservationChartID) REFERENCES Nursing.ObservationChart(ObservationChartID) ON UPDATE CASCADE ON DELETE CASCADE
)
GO
CREATE TABLE Nursing.Ward(
	WardID INT PRIMARY KEY IDENTITY NOT NULL,
	WardName VARCHAR(50) UNIQUE,
	WardDescription VARCHAR(50),
	CreatedDate DATE NOT NULL DEFAULT GETDATE(),
	UpdatedDate DATE NOT NULL DEFAULT GETDATE()
)
GO
CREATE TABLE Nursing.WardSection(
	WardSectionID INT PRIMARY KEY IDENTITY NOT NULL,
	WardID INT,
	WardSectionName VARCHAR(50) UNIQUE,
	WardSectionDescription VARCHAR(50),
	CreatedDate DATE NOT NULL DEFAULT GETDATE(),
	UpdatedDate DATE NOT NUll DEFAULT GETDATE(),
	FOREIGN KEY (WardID) REFERENCES Nursing.Ward(WardID) ON UPDATE CASCADE ON DELETE CASCADE
)
GO
CREATE TABLE Nursing.SectionBed(
	SectionBedID INT PRIMARY KEY IDENTITY NOT NULL,
	WardSectionID INT,
	BedName VARCHAR(50) UNIQUE,
	BedDescription VARCHAR(50),
	FOREIGN KEY (WardSectionID) REFERENCES Nursing.WardSection(WardSectionID) ON UPDATE CASCADE ON DELETE CASCADE
)
GO
CREATE TABLE Nursing.BedAssignment(
	BedAssignmentID INT PRIMARY KEY IDENTITY NOT NUll,
	BedName VARCHAR(50) UNIQUE,
	AssignmentLeased BIT,
	AssignmentDate DATE NOT NULL DEFAULT GETDATE(),
	FOREIGN KEY (BedName) REFERENCES Nursing.SectionBed(BedName) ON UPDATE CASCADE ON DELETE CASCADE
)
GO

CREATE TABLE Nursing.ServicesRendered(
	ServicesRenderedID INT PRIMARY KEY IDENTITY,
	PatientID INT,
	ServicesRenderedDate DATETIME NOT NULL,
	FOREIGN KEY (PatientID) REFERENCES Patients.Patient (PatientID) ON UPDATE CASCADE ON DELETE SET NULL
)
GO

CREATE TABLE Nursing.ServicesRenderedItems (
	ServicesRenderedItemID INT PRIMARY KEY IDENTITY,
	ServicesRenderedID INT,
	ServicesRenderedItem INT,
	FOREIGN KEY (ServicesRenderedItem) REFERENCES Accounts.BillingTypeItems (BillingTypeItemID) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (ServicesRenderedID) REFERENCES Nursing.ServicesRendered (ServicesRenderedID) ON UPDATE CASCADE ON DELETE CASCADE
)
GO